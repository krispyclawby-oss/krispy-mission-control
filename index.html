<!doctype html>
<html lang="en" data-theme="dark" data-anim="normal">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mission Control ‚Ä¢ Team Live Scene v4 Preview</title>
  <meta name="description" content="High-resolution animated team live scene preview for mission-control dashboard." />
  <style>
    :root {
      --bg: #050a18;
      --bg-2: #0b1430;
      --card: rgba(16, 30, 64, 0.78);
      --line: rgba(140, 173, 255, 0.22);
      --text: #edf3ff;
      --muted: #9db0da;
      --accent: #67b1ff;
      --accent-2: #9f7dff;
      --good: #31d8a5;
      --warn: #ffbc5f;
      --bad: #ff6e82;
      --shadow: 0 20px 48px rgba(0, 0, 0, .45);
      --ambient-speed: 11s;
      --pulse-speed: 2.4s;
      --bob-speed: 4.6s;
      --float-speed: 8.5s;
    }
    html[data-anim="low"] {
      --ambient-speed: 16s;
      --pulse-speed: 3.6s;
      --bob-speed: 7s;
      --float-speed: 12s;
    }
    html[data-anim="high"] {
      --ambient-speed: 8s;
      --pulse-speed: 1.5s;
      --bob-speed: 3.2s;
      --float-speed: 6s;
    }
    html[data-theme="light"] {
      --bg: #edf2ff;
      --bg-2: #dce7ff;
      --card: rgba(255, 255, 255, 0.82);
      --line: rgba(44, 79, 160, 0.22);
      --text: #142245;
      --muted: #54668f;
      --accent: #2b65ea;
      --accent-2: #634ce8;
      --good: #0ea579;
      --warn: #cc7a0f;
      --bad: #d24460;
      --shadow: 0 14px 34px rgba(39, 72, 145, .2);
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color: var(--text);
      background:
        radial-gradient(1400px 700px at -10% -20%, rgba(91, 149, 255, .24), transparent 58%),
        radial-gradient(1000px 600px at 110% -30%, rgba(159, 125, 255, .2), transparent 55%),
        linear-gradient(160deg, var(--bg), var(--bg-2));
      min-height: 100vh;
    }

    .wrap { max-width: 1280px; margin: 0 auto; padding: 18px 14px 28px; display: grid; gap: 12px; }
    .glass {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 18px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }

    .topbar { padding: 14px; display: grid; gap: 12px; }
    .head { display: flex; justify-content: space-between; gap: 10px; align-items: start; flex-wrap: wrap; }
    h1 { margin: 0; font-size: clamp(1.16rem, 3.7vw, 2rem); }
    .sub { margin: 4px 0 0; color: var(--muted); font-size: .92rem; }
    .links { display: flex; gap: 8px; flex-wrap: wrap; }
    .link, .btn {
      border: 1px solid var(--line);
      color: var(--text);
      text-decoration: none;
      background: linear-gradient(180deg, rgba(255,255,255,.11), rgba(255,255,255,.03));
      border-radius: 12px;
      padding: 8px 11px;
      font-size: .8rem;
      font-weight: 650;
      cursor: pointer;
    }
    .control { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
    .chips { display: inline-flex; border: 1px solid var(--line); border-radius: 999px; padding: 3px; gap: 3px; }
    .chip {
      border: 0; border-radius: 999px; padding: 7px 10px; cursor: pointer;
      color: var(--muted); background: transparent; font-size: .77rem; font-weight: 700;
    }
    .chip.active { color: var(--text); background: linear-gradient(180deg, rgba(103,177,255,.28), rgba(159,125,255,.18)); }

    .scene-wrap { padding: 12px; display: grid; gap: 12px; }
    .scene {
      min-height: 520px;
      border-radius: 16px;
      border: 1px solid var(--line);
      background:
        radial-gradient(circle at 12% 14%, rgba(103,177,255,.24), transparent 24%),
        radial-gradient(circle at 87% 22%, rgba(159,125,255,.24), transparent 24%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.01));
      overflow: hidden;
      position: relative;
    }

    .ambient, .ambient::before, .ambient::after {
      position: absolute; inset: -20% -5%; content: ""; pointer-events: none;
      background: conic-gradient(from 20deg, transparent 0 50deg, rgba(103,177,255,.16) 90deg, transparent 130deg 230deg, rgba(159,125,255,.16) 255deg, transparent 300deg);
      filter: blur(30px);
      opacity: .7;
      animation: rotate var(--ambient-speed) linear infinite;
    }
    .ambient::before { animation-direction: reverse; opacity: .5; transform: scale(1.2); }
    .ambient::after { opacity: .25; transform: scale(1.35); }

    .map {
      position: absolute; inset: 14px;
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      grid-template-rows: repeat(8, 1fr);
      gap: 10px;
    }

    .zone {
      border: 1px dashed color-mix(in srgb, var(--line) 80%, transparent);
      border-radius: 14px;
      padding: 8px;
      position: relative;
      overflow: hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.01));
      transition: border-color .2s ease, transform .2s ease;
    }
    .zone:hover { border-color: color-mix(in srgb, var(--accent) 70%, var(--line)); transform: translateY(-2px); }
    .zone-title { font-size: .72rem; letter-spacing: .08em; text-transform: uppercase; color: var(--muted); }
    .zone-mood { font-size: .68rem; color: color-mix(in srgb, var(--muted) 88%, var(--text)); margin-top: 2px; }

    .pulse {
      position: absolute; right: 10px; top: 10px;
      width: 10px; height: 10px; border-radius: 50%;
      background: var(--good); box-shadow: 0 0 0 0 color-mix(in srgb, var(--good) 55%, transparent);
      animation: pulse var(--pulse-speed) infinite;
    }

    .avatar {
      width: 58px; aspect-ratio: 1; border-radius: 16px;
      display: grid; place-items: center; font-size: 1.3rem;
      background: linear-gradient(150deg, rgba(103,177,255,.45), rgba(159,125,255,.35));
      border: 1px solid color-mix(in srgb, var(--accent) 55%, var(--line));
      box-shadow: inset 0 1px 0 rgba(255,255,255,.25), 0 9px 18px rgba(0,0,0,.25);
      animation: bob var(--bob-speed) ease-in-out infinite;
    }

    .team-grid { position: absolute; inset: 54px 10px 10px; display: grid; gap: 8px; grid-template-columns: repeat(auto-fill, minmax(188px, 1fr)); align-content: start; }
    .card {
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 8px;
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 8px;
      background: linear-gradient(180deg, rgba(255,255,255,.1), rgba(255,255,255,.02));
      transition: transform .22s ease, border-color .22s ease, box-shadow .22s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      min-height: 90px;
    }
    .card:hover {
      transform: translateY(-3px) scale(1.01);
      border-color: color-mix(in srgb, var(--accent) 70%, var(--line));
      box-shadow: 0 10px 22px rgba(0,0,0,.25);
    }
    .glow {
      position: absolute; inset: -40% 55% auto -30%; height: 120px;
      background: radial-gradient(circle at center, rgba(255,255,255,.28), transparent 62%);
      animation: sweep var(--float-speed) linear infinite;
      pointer-events: none;
    }

    .name { margin: 0; font-size: .86rem; font-weight: 800; }
    .role { color: var(--muted); font-size: .73rem; margin-top: 1px; }
    .task { font-size: .75rem; margin-top: 4px; }
    .meta { display: flex; gap: 6px; align-items: center; flex-wrap: wrap; margin-top: 5px; }
    .pill {
      font-size: .64rem; padding: 3px 7px; border-radius: 999px; font-weight: 700;
      text-transform: uppercase; letter-spacing: .05em;
      border: 1px solid transparent;
    }
    .mood-calm { color: var(--good); border-color: color-mix(in srgb, var(--good) 64%, transparent); background: color-mix(in srgb, var(--good) 16%, transparent); }
    .mood-focus { color: var(--accent); border-color: color-mix(in srgb, var(--accent) 64%, transparent); background: color-mix(in srgb, var(--accent) 16%, transparent); }
    .mood-alert { color: var(--warn); border-color: color-mix(in srgb, var(--warn) 64%, transparent); background: color-mix(in srgb, var(--warn) 14%, transparent); }
    .conf { color: var(--text); border-color: var(--line); background: color-mix(in srgb, var(--line) 42%, transparent); }

    .bubble {
      position: absolute;
      max-width: 220px;
      background: linear-gradient(180deg, rgba(255,255,255,.2), rgba(255,255,255,.08));
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 7px 9px;
      font-size: .72rem;
      box-shadow: 0 10px 22px rgba(0,0,0,.2);
      animation: float var(--float-speed) ease-in-out infinite;
      backdrop-filter: blur(6px);
    }
    .bubble::after {
      content: "";
      position: absolute;
      border: 7px solid transparent;
      border-top-color: color-mix(in srgb, var(--line) 88%, transparent);
      bottom: -13px; left: 22px;
    }

    .b1 { left: 9%; top: 7%; animation-delay: .2s; }
    .b2 { right: 8%; top: 16%; animation-delay: 1.2s; }
    .b3 { left: 35%; bottom: 8%; animation-delay: 2s; }

    .path {
      position: absolute; inset: 0;
      pointer-events: none;
    }
    .path line {
      stroke: color-mix(in srgb, var(--accent) 35%, var(--line));
      stroke-width: 1.2;
      stroke-dasharray: 4 8;
      animation: dash 5s linear infinite;
    }

    .legend { display: flex; gap: 12px; flex-wrap: wrap; color: var(--muted); font-size: .75rem; }

    @media (min-width: 920px) {
      .topbar { padding: 16px; }
      .scene-wrap { padding: 14px; }
      .z1 { grid-column: 1 / 5; grid-row: 1 / 5; }
      .z2 { grid-column: 5 / 9; grid-row: 1 / 4; }
      .z3 { grid-column: 9 / 13; grid-row: 1 / 5; }
      .z4 { grid-column: 3 / 8; grid-row: 5 / 9; }
      .z5 { grid-column: 7 / 10; grid-row: 5 / 9; }
      .z6 { grid-column: 10 / 13; grid-row: 5 / 9; }
    }

    @media (max-width: 919px) {
      .scene { min-height: 1040px; }
      .map { grid-template-columns: 1fr; grid-template-rows: repeat(6, minmax(160px, 1fr)); inset: 12px; }
      .zone { min-height: 170px; }
      .team-grid { inset: 48px 8px 8px; }
      .card { min-height: 84px; }
    }

    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after { animation-duration: 0s !important; transition-duration: 0s !important; }
      html { --ambient-speed: 0s; --pulse-speed: 0s; --bob-speed: 0s; --float-speed: 0s; }
    }

    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 color-mix(in srgb, var(--good) 55%, transparent); }
      70% { box-shadow: 0 0 0 14px transparent; }
      100% { box-shadow: 0 0 0 0 transparent; }
    }
    @keyframes bob { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }
    @keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }
    @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    @keyframes dash { to { stroke-dashoffset: -120; } }
    @keyframes sweep { from { transform: translateX(-10%); } to { transform: translateX(220%); } }
  </style>
</head>
<body>
  <main class="wrap">
    <header class="glass topbar">
      <div class="head">
        <div>
          <h1>Mission Control ‚Äî Team Live Scene (V4 Preview)</h1>
          <p class="sub">High-personality, professional team map with live movement, mood, confidence, and activity pulses.</p>
        </div>
        <div class="links">
          <a class="link" href="./v2.html">v2</a>
          <a class="link" href="./v3.html">v3</a>
          <a class="link" href="./8bit.html">8-bit old</a>
        </div>
      </div>
      <div class="control">
        <span style="color:var(--muted);font-size:.78rem;font-weight:700;">Animation intensity</span>
        <div class="chips" id="intensityChips">
          <button class="chip" data-mode="low" type="button">Low</button>
          <button class="chip active" data-mode="normal" type="button">Normal</button>
          <button class="chip" data-mode="high" type="button">High</button>
        </div>
        <button class="btn" id="themeToggle" type="button">Switch theme</button>
      </div>
    </header>

    <section class="glass scene-wrap">
      <div class="scene" id="sceneRoot" aria-label="Animated live team scene">
        <div class="ambient"></div>
        <svg class="path" viewBox="0 0 1200 700" preserveAspectRatio="none" aria-hidden="true">
          <line x1="130" y1="170" x2="450" y2="150"></line>
          <line x1="470" y1="170" x2="830" y2="190"></line>
          <line x1="250" y1="320" x2="640" y2="520"></line>
          <line x1="860" y1="330" x2="760" y2="540"></line>
        </svg>
        <div class="bubble b1">‚ÄúSearch quality is back above baseline. Nice catch, team.‚Äù</div>
        <div class="bubble b2">‚ÄúHotfix deployed. Watching conversion curve now.‚Äù</div>
        <div class="bubble b3">‚ÄúMuse posted Tejal‚Äôs learning check-in + motivation note for tonight.‚Äù</div>
        <div class="map" id="teamMap"></div>
      </div>
      <div class="legend" id="legend"></div>
    </section>
  </main>

  <script>
    const sceneData = {
      zones: [
        {
          id: 'z1',
          className: 'z1',
          name: 'Ops Bay',
          mood: 'Focused momentum',
          people: [
            { emoji: 'üë©üèΩ‚Äçüíª', name: 'Maya', role: 'Ops Lead', task: 'Sequencing this morning runbook', mood: 'focus', confidence: 93 },
            { emoji: 'üßëüèª‚Äçüíª', name: 'Leo', role: 'Automation', task: 'Stabilizing handoff scripts', mood: 'calm', confidence: 89 }
          ]
        },
        {
          id: 'z2',
          className: 'z2',
          name: 'Signal Lab',
          mood: 'Curious + analytical',
          people: [
            { emoji: 'üë®üèæ‚Äçüî¨', name: 'Ravi', role: 'Quant Analyst', task: 'Retuning alert thresholds', mood: 'focus', confidence: 84 },
            { emoji: 'üë©üèª‚Äçüî¨', name: 'Nina', role: 'Data Scientist', task: 'Comparing drift scenarios', mood: 'alert', confidence: 78 }
          ]
        },
        {
          id: 'z3',
          className: 'z3',
          name: 'Marketplace Desk',
          mood: 'Fast response',
          people: [
            { emoji: 'üßëüèΩ‚Äçüíº', name: 'Ari', role: 'Commerce Owner', task: 'Monitoring recovery window', mood: 'alert', confidence: 73 },
            { emoji: 'üë®üèª‚Äçüíº', name: 'Jon', role: 'Listing Ops', task: 'Clearing sync retries', mood: 'focus', confidence: 81 }
          ]
        },
        {
          id: 'z4',
          className: 'z4',
          name: 'Planning Studio',
          mood: 'Calm coordination',
          people: [
            { emoji: 'üë©üèæ‚ÄçüóÇÔ∏è', name: 'Elena', role: 'Program Manager', task: 'Aligning release checklist', mood: 'calm', confidence: 88 },
            { emoji: 'üßëüèº‚ÄçüöÄ', name: 'Kai', role: 'Chief of Staff', task: 'Unblocking cross-team asks', mood: 'focus', confidence: 86 }
          ]
        },
        {
          id: 'z5',
          className: 'z5',
          name: 'Leadership Deck',
          mood: 'High-confidence oversight',
          people: [
            { emoji: 'üß†', name: 'Boss', role: 'Director', task: 'Prioritizing next decision gates', mood: 'calm', confidence: 95 }
          ]
        },
        {
          id: 'z6',
          className: 'z6',
          name: 'Muse Support Station',
          mood: 'Warm, encouraging cadence',
          people: [
            { emoji: 'üå∑', name: 'Muse', role: 'Family Support & Motivation', task: 'Daily Tejal check-in: learning goals + encouragement notes', mood: 'calm', confidence: 97 }
          ]
        }
      ],
      activityLegend: [
        'Status glow = active work stream',
        'Pulse = fresh team update',
        'Mood tag = team emotional context',
        'Confidence = self-reported certainty',
        'Muse station = family-support workflow lane'
      ]
    };

    const mapEl = document.getElementById('teamMap');
    const legendEl = document.getElementById('legend');
    const html = document.documentElement;

    function moodClass(v) {
      if (v === 'calm') return 'mood-calm';
      if (v === 'alert') return 'mood-alert';
      return 'mood-focus';
    }

    function renderScene() {
      mapEl.innerHTML = sceneData.zones.map(z => `
        <section class="zone ${z.className}">
          <div class="zone-title">${z.name}</div>
          <div class="zone-mood">${z.mood}</div>
          <div class="pulse"></div>
          <div class="team-grid">
            ${z.people.map(p => `
              <article class="card" title="${p.name} ‚Ä¢ ${p.role}">
                <div class="glow"></div>
                <div class="avatar" aria-hidden="true">${p.emoji}</div>
                <div>
                  <h3 class="name">${p.name}</h3>
                  <div class="role">${p.role}</div>
                  <div class="task">${p.task}</div>
                  <div class="meta">
                    <span class="pill ${moodClass(p.mood)}">${p.mood}</span>
                    <span class="pill conf">${p.confidence}% confidence</span>
                  </div>
                </div>
              </article>
            `).join('')}
          </div>
        </section>
      `).join('');

      legendEl.innerHTML = sceneData.activityLegend.map(x => `<span>‚Ä¢ ${x}</span>`).join('');
    }

    function setupControls() {
      const chips = Array.from(document.querySelectorAll('.chip'));
      const key = 'mc-v4-anim';
      const saved = localStorage.getItem(key);
      if (saved) setAnimMode(saved, chips);

      document.getElementById('intensityChips').addEventListener('click', (e) => {
        const btn = e.target.closest('.chip');
        if (!btn) return;
        setAnimMode(btn.dataset.mode, chips);
        localStorage.setItem(key, btn.dataset.mode);
      });

      const themeKey = 'mc-v4-theme';
      const savedTheme = localStorage.getItem(themeKey);
      if (savedTheme === 'light' || savedTheme === 'dark') html.setAttribute('data-theme', savedTheme);

      document.getElementById('themeToggle').addEventListener('click', () => {
        const next = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-theme', next);
        localStorage.setItem(themeKey, next);
      });

      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
        setAnimMode('low', chips);
      }
    }

    function setAnimMode(mode, chips) {
      html.setAttribute('data-anim', mode);
      chips.forEach(c => c.classList.toggle('active', c.dataset.mode === mode));
    }

    renderScene();
    setupControls();
  </script>
</body>
</html>